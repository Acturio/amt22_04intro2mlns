<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 5 Clustering Jerárquico | AMAT- Ciencia de Datos y Machine Learning</title>
  <meta name="description" content="AMAT: Ciencia de Datos y Machine Learning" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 5 Clustering Jerárquico | AMAT- Ciencia de Datos y Machine Learning" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="AMAT: Ciencia de Datos y Machine Learning" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 5 Clustering Jerárquico | AMAT- Ciencia de Datos y Machine Learning" />
  
  <meta name="twitter:description" content="AMAT: Ciencia de Datos y Machine Learning" />
  

<meta name="author" content="Karina Lizette Gamboa Puente" />
<meta name="author" content="Oscar Arturo Bringas López" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="clustering-no-jerárquico.html"/>
<link rel="next" href="evaluación-de-clusters.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/d3v3-3.5.3/./d3v3.min.js"></script>
<link href="libs/d3heatmapcore-0.0.0/heatmapcore.css" rel="stylesheet" />
<script src="libs/d3heatmapcore-0.0.0/heatmapcore.js"></script>
<script src="libs/d3v3-tip-0.6.6/index.js"></script>
<script src="libs/d3heatmap-binding-0.9.0/d3heatmap.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><img src="img/amat-logo.png" width="280"></a></li|
|:-:|  
<center>Ciencia de Datos y Machine Learning</center>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>BIENVENIDA</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objetivo"><i class="fa fa-check"></i>Objetivo</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#instructores"><i class="fa fa-check"></i>Instructores</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-curso"><i class="fa fa-check"></i>Estructura del curso</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#alcances-del-curso"><i class="fa fa-check"></i>Alcances del curso</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#duración-y-evaluación-del-curso"><i class="fa fa-check"></i>Duración y evaluación del curso</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#recursos-y-dinámica-de-clase"><i class="fa fa-check"></i>Recursos y dinámica de clase</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html"><i class="fa fa-check"></i><b>1</b> Introducción a Ciencia de Datos</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#qué-es-ciencia-de-datos"><i class="fa fa-check"></i><b>1.1</b> ¿Qué es Ciencia de Datos?</a>
<ul>
<li class="chapter" data-level="" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#definiendo-conceptos"><i class="fa fa-check"></i>Definiendo conceptos:</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#objetivos"><i class="fa fa-check"></i><b>1.2</b> Objetivos</a></li>
<li class="chapter" data-level="1.3" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#requisitos"><i class="fa fa-check"></i><b>1.3</b> Requisitos</a></li>
<li class="chapter" data-level="1.4" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#aplicaciones"><i class="fa fa-check"></i><b>1.4</b> Aplicaciones</a></li>
<li class="chapter" data-level="1.5" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#tipos-de-algoritmos"><i class="fa fa-check"></i><b>1.5</b> Tipos de algoritmos</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#aprendizaje-supervisado"><i class="fa fa-check"></i><b>1.5.1</b> Aprendizaje supervisado</a></li>
<li class="chapter" data-level="1.5.2" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#aprendizaje-no-supervisado"><i class="fa fa-check"></i><b>1.5.2</b> Aprendizaje no supervisado</a></li>
<li class="chapter" data-level="1.5.3" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#aprendizaje-por-refuerzo"><i class="fa fa-check"></i><b>1.5.3</b> Aprendizaje por refuerzo</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introducción-a-ciencia-de-datos.html"><a href="introducción-a-ciencia-de-datos.html#ciclo-de-un-proyecto"><i class="fa fa-check"></i><b>1.6</b> Ciclo de un proyecto</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="scoping.html"><a href="scoping.html"><i class="fa fa-check"></i><b>2</b> Scoping</a>
<ul>
<li class="chapter" data-level="" data-path="scoping.html"><a href="scoping.html#definir-objetivos"><i class="fa fa-check"></i>Definir objetivo(s)</a></li>
<li class="chapter" data-level="" data-path="scoping.html"><a href="scoping.html#qué-acciones-o-intervenciones-existen-que-serán-mejoradas-a-través-de-este-proyecto"><i class="fa fa-check"></i>¿Qué acciones o intervenciones existen que serán mejoradas a través de este proyecto?</a></li>
<li class="chapter" data-level="" data-path="scoping.html"><a href="scoping.html#qué-datos-tenemos-y-cuáles-necesitamos"><i class="fa fa-check"></i>¿Qué datos tenemos y cuáles necesitamos?</a></li>
<li class="chapter" data-level="" data-path="scoping.html"><a href="scoping.html#cuál-es-el-análisis-que-necesitamos-hacer"><i class="fa fa-check"></i>¿Cuál es el análisis que necesitamos hacer?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html"><i class="fa fa-check"></i><b>3</b> Análisis de Componentes Principales</a>
<ul>
<li class="chapter" data-level="3.1" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html#medidas-de-dispersión"><i class="fa fa-check"></i><b>3.1</b> Medidas de dispersión</a></li>
<li class="chapter" data-level="3.2" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html#construcción-matemática"><i class="fa fa-check"></i><b>3.2</b> Construcción matemática</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html#eigenvalores-y-eigenvectores"><i class="fa fa-check"></i><b>3.2.1</b> Eigenvalores y eigenvectores</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html#implementación-en-r"><i class="fa fa-check"></i><b>3.3</b> Implementación en R</a></li>
<li class="chapter" data-level="3.4" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html#reducción-de-dimensión"><i class="fa fa-check"></i><b>3.4</b> Reducción de dimensión</a></li>
<li class="chapter" data-level="3.5" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html#representación-gráfica"><i class="fa fa-check"></i><b>3.5</b> Representación gráfica</a></li>
<li class="chapter" data-level="3.6" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html#predicciones"><i class="fa fa-check"></i><b>3.6</b> Predicciones</a></li>
<li class="chapter" data-level="3.7" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html#ejercicios"><i class="fa fa-check"></i><b>3.7</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html"><i class="fa fa-check"></i><b>4</b> Clustering No Jerárquico</a>
<ul>
<li class="chapter" data-level="4.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#cálculo-de-distancia"><i class="fa fa-check"></i><b>4.1</b> Cálculo de distancia</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#distancias-homogéneas"><i class="fa fa-check"></i><b>4.1.1</b> Distancias homogéneas</a></li>
<li class="chapter" data-level="4.1.2" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#distancias-mixtas"><i class="fa fa-check"></i><b>4.1.2</b> Distancias mixtas</a></li>
<li class="chapter" data-level="4.1.3" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#visualización-de-distancias"><i class="fa fa-check"></i><b>4.1.3</b> Visualización de distancias</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#k---means"><i class="fa fa-check"></i><b>4.2</b> K - means</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#ajuste-de-modelo-cómo-funciona-el-algortimo"><i class="fa fa-check"></i><b>4.2.1</b> Ajuste de modelo: ¿Cómo funciona el algortimo?</a></li>
<li class="chapter" data-level="4.2.2" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#calidad-de-ajuste"><i class="fa fa-check"></i><b>4.2.2</b> Calidad de ajuste</a></li>
<li class="chapter" data-level="4.2.3" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#cómo-seleccionamos-k"><i class="fa fa-check"></i><b>4.2.3</b> ¿Cómo seleccionamos K?</a></li>
<li class="chapter" data-level="4.2.4" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#implementación-en-r-1"><i class="fa fa-check"></i><b>4.2.4</b> Implementación en R</a></li>
<li class="chapter" data-level="4.2.5" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#warnings"><i class="fa fa-check"></i><b>4.2.5</b> Warnings</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#partitioning-around-medoids-pam"><i class="fa fa-check"></i><b>4.3</b> Partitioning Around Medoids (PAM)</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#algoritmo-pam"><i class="fa fa-check"></i><b>4.3.1</b> Algoritmo PAM</a></li>
<li class="chapter" data-level="4.3.2" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#implementación-en-r-2"><i class="fa fa-check"></i><b>4.3.2</b> Implementación en R</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#clustering-large-applications-clara"><i class="fa fa-check"></i><b>4.4</b> Clustering Large Applications (CLARA)</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#implementación-en-r-3"><i class="fa fa-check"></i><b>4.4.1</b> Implementación en R</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#dbscan"><i class="fa fa-check"></i><b>4.5</b> DBSCAN</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#algoritmo"><i class="fa fa-check"></i><b>4.5.1</b> Algoritmo</a></li>
<li class="chapter" data-level="4.5.2" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#estimación-de-parámetros"><i class="fa fa-check"></i><b>4.5.2</b> Estimación de parámetros</a></li>
<li class="chapter" data-level="4.5.3" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#implementación-en-r-4"><i class="fa fa-check"></i><b>4.5.3</b> Implementación en R</a></li>
<li class="chapter" data-level="4.5.4" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#ventajas-de-dbscan"><i class="fa fa-check"></i><b>4.5.4</b> Ventajas de DBSCAN</a></li>
<li class="chapter" data-level="4.5.5" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#aplicación-dbscan"><i class="fa fa-check"></i><b>4.5.5</b> Aplicación DBSCAN</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#comparación-de-algoritmos"><i class="fa fa-check"></i><b>4.6</b> Comparación de algoritmos</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html"><i class="fa fa-check"></i><b>5</b> Clustering Jerárquico</a>
<ul>
<li class="chapter" data-level="5.1" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#agglomerative-divise-clustering"><i class="fa fa-check"></i><b>5.1</b> Agglomerative &amp; Divise Clustering</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#algoritmo-1"><i class="fa fa-check"></i><b>5.1.1</b> Algoritmo</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#implementación-en-r-5"><i class="fa fa-check"></i><b>5.2</b> Implementación en R</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#preparación-y-estructuración-de-datos"><i class="fa fa-check"></i><b>5.2.1</b> Preparación y estructuración de datos</a></li>
<li class="chapter" data-level="5.2.2" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#medidas-de-disimilaridad"><i class="fa fa-check"></i><b>5.2.2</b> Medidas de (di)similaridad</a></li>
<li class="chapter" data-level="5.2.3" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#función-liga"><i class="fa fa-check"></i><b>5.2.3</b> Función Liga</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#dendogramas"><i class="fa fa-check"></i><b>5.3</b> Dendogramas</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#selección-de-grupos"><i class="fa fa-check"></i><b>5.3.1</b> Selección de grupos</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#comparación-de-dendogramas"><i class="fa fa-check"></i><b>5.4</b> Comparación de dendogramas</a></li>
<li class="chapter" data-level="5.5" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#heatmaps"><i class="fa fa-check"></i><b>5.5</b> Heatmaps</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="evaluación-de-clusters.html"><a href="evaluación-de-clusters.html"><i class="fa fa-check"></i><b>6</b> Evaluación de clusters</a>
<ul>
<li class="chapter" data-level="6.1" data-path="evaluación-de-clusters.html"><a href="evaluación-de-clusters.html#tendencia-de-factibilidad"><i class="fa fa-check"></i><b>6.1</b> Tendencia de factibilidad</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="anexo-visualización-con-ggplot.html"><a href="anexo-visualización-con-ggplot.html"><i class="fa fa-check"></i><b>7</b> Anexo: Visualización con Ggplot</a>
<ul>
<li class="chapter" data-level="7.1" data-path="anexo-visualización-con-ggplot.html"><a href="anexo-visualización-con-ggplot.html#ggplot2"><i class="fa fa-check"></i><b>7.1</b> Ggplot2</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="anexo-visualización-con-ggplot.html"><a href="anexo-visualización-con-ggplot.html#objetos-aesteticos"><i class="fa fa-check"></i><b>7.1.1</b> Objetos aesteticos</a></li>
<li class="chapter" data-level="7.1.2" data-path="anexo-visualización-con-ggplot.html"><a href="anexo-visualización-con-ggplot.html#objetos-geométricos-o-capas"><i class="fa fa-check"></i><b>7.1.2</b> Objetos geométricos o capas</a></li>
<li class="chapter" data-level="7.1.3" data-path="anexo-visualización-con-ggplot.html"><a href="anexo-visualización-con-ggplot.html#facetas"><i class="fa fa-check"></i><b>7.1.3</b> Facetas</a></li>
<li class="chapter" data-level="7.1.4" data-path="anexo-visualización-con-ggplot.html"><a href="anexo-visualización-con-ggplot.html#más-sobre-estéticas"><i class="fa fa-check"></i><b>7.1.4</b> Más sobre estéticas</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="anexo-visualización-con-ggplot.html"><a href="anexo-visualización-con-ggplot.html#referencias"><i class="fa fa-check"></i><b>7.2</b> Referencias</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="./"><img src="img/amat-logo.png" width="280"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AMAT- Ciencia de Datos y Machine Learning</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="clustering-jerárquico" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Capítulo 5</span> Clustering Jerárquico<a href="clustering-jerárquico.html#clustering-jerárquico" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>En esta sección se analizarán diferentes metodologías que tienen como propósito realizar segmentaciones de unidades de manera jerárquica, es decir, a partir de un único grupo se van agrupando o separando los individuos dependiendo de qué tan lejanos o cercanos se encuentran unos de otros. A diferencia del clustering por partición (no jerárquico), este no requiere de la pre-especificación del número de clusters a producir.</p>
<p>El clustering jerárquico se divide en dos tipos:</p>
<p><strong>1) Clustering aglomerativo.</strong></p>
<p><strong>2) Clustering divisivo.</strong></p>
<p>Las principales metodologías a revisar serán:</p>
<ul>
<li><p>Liga simple o vecino más cercano</p></li>
<li><p>Liga compleja o vecino más lejano</p></li>
<li><p>Liga promedio</p></li>
<li><p>Liga centroide</p></li>
<li><p>Varianza mínima de Ward</p></li>
</ul>
<p><img src="img/04-hclus/01-clusters.jpeg" width="350pt" /><img src="img/04-hclus/02-clusters.jpeg" width="350pt" /><img src="img/04-hclus/03-clusters.jpeg" width="350pt" /><img src="img/04-hclus/04-clusters.jpeg" width="350pt" /></p>
<p>A partir del concepto de distancia entre puntos en un espacio de <em>N</em> dimensiones (variables), se realiza la agrupación de elementos para posteriormente calcular cuántos <strong>grupos</strong> es conveniente usar. Este proceso puede ser graficado de múltiples formas, sin embargo, la visualización más usada corresponde al <strong>dendograma</strong>, el cual es un gráfico como el presentado a continuación:</p>
<p><img src="img/04-hclus/06-Hierarchical-Clustering.webp" width="400pt" style="display: block; margin: auto;" /></p>
<ul>
<li><p>El eje horizontal representa los <strong>puntos de datos</strong>.</p></li>
<li><p>La altura a lo largo del eje vertical representa la <strong>distancia entre los grupos</strong>.</p></li>
<li><p>Las líneas verticales en el gráfico representan grupos.</p></li>
<li><p>La altura de estas líneas representa la distancia desde el grupo más cercano.</p></li>
</ul>
<p>Podemos encontrar el número de conglomerados que mejor representan los grupos en los datos usando el dendrograma.</p>
<p><img src="img/04-hclus/07-Hierarchical-Clustering-1.webp" width="400pt" style="display: block; margin: auto;" /></p>
<p>Las líneas verticales con las mayores distancias entre ellas, es decir, la mayor altura en el mismo nivel, dan el número de grupos que mejor representan los datos.</p>
<div id="agglomerative-divise-clustering" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Agglomerative &amp; Divise Clustering<a href="clustering-jerárquico.html#agglomerative-divise-clustering" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El cluster aglomerativo es el tipo de clustering jerárquico más comúnmente usado para agrupar objetos en clusters basados en su similitud. También es conocido como <strong>AGNES</strong> (Agglomerative Nesting). El inverso del agrupamiento aglomerativo es el agrupmiento divisivo, en cual es conocido también como <strong>DIANA</strong> (<em>Divise Analysis</em>).</p>
<p><img src="img/04-hclus/08-agnes_diana_clustering.png" width="600pt" style="display: block; margin: auto;" /></p>
<div id="algoritmo-1" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Algoritmo<a href="clustering-jerárquico.html#algoritmo-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Este algoritmo AGNES funciona de la manera <strong>“bottom-up”</strong>. Esto es:</p>
<ol style="list-style-type: decimal">
<li><p>cada objeto es <strong>inicialmente considerado como un cluster de único elemento</strong> (hoja).</p></li>
<li><p>En cada paso del algoritmo, los 2 clusters que son más <strong>similares</strong> son combinados en uno nuevo más grande.</p></li>
<li><p>El paso anterior es repetido hasta que todos los puntos son miembros de un <strong>único</strong> y gran cluster.</p></li>
</ol>
<p>Mientras que el algoritmo DIANA es del tipo <strong>top-down</strong>, funcionando de la siguiente manera:</p>
<ol style="list-style-type: decimal">
<li><p>Comienza con una raíz, en la que todos los elementos están incluidos en el mismo grupo.</p></li>
<li><p>En cada paso del algoritmo, los 2 clusters que son más <strong>disimilares</strong> son divididos en dos nuevos grupos.</p></li>
<li><p>El paso anterior es repetido hasta que todos los puntos son un cluster de elemento único en sí mismos.</p></li>
</ol>
<div class="infobox quicktip">
<p><strong>¡¡ TIP !!</strong></p>
<ul>
<li><p>Clustering aglomerativo es bueno en identificar pequeños clusters</p></li>
<li><p>Clustering divisivo es bueno para detectar los clusters grandes.</p></li>
</ul>
</div>
</div>
</div>
<div id="implementación-en-r-5" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Implementación en R<a href="clustering-jerárquico.html#implementación-en-r-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En esta sección se revisan las librerías y funciones que hacen posible estos algoritmos. Como metodología general, tenemos los siguientes pasos:</p>
<ol style="list-style-type: decimal">
<li><p>Preparación de datos</p></li>
<li><p>Cálculo de (di)similitudes entre pares de objetos en el conjunto de datos</p></li>
<li><p>Uso de <strong>función liga</strong> para agrupar los objetos en un árbol jerárquico basado en la distancia generada en los pasos anteriores.</p></li>
<li><p>Determinar el umbral de corte del árbol jerárquico para la creación de grupos.</p></li>
</ol>
<div id="preparación-y-estructuración-de-datos" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Preparación y estructuración de datos<a href="clustering-jerárquico.html#preparación-y-estructuración-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Los datos deben ser presentados en un formato matricial, en donde los renglones representan a las observaciones y las columnas a las variables.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="clustering-jerárquico.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;USArrests&quot;</span>)</span>
<span id="cb78-2"><a href="clustering-jerárquico.html#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="clustering-jerárquico.html#cb78-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">scale</span>(USArrests)</span>
<span id="cb78-4"><a href="clustering-jerárquico.html#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="clustering-jerárquico.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##                Murder   Assault   UrbanPop         Rape
## Alabama    1.24256408 0.7828393 -0.5209066 -0.003416473
## Alaska     0.50786248 1.1068225 -1.2117642  2.484202941
## Arizona    0.07163341 1.4788032  0.9989801  1.042878388
## Arkansas   0.23234938 0.2308680 -1.0735927 -0.184916602
## California 0.27826823 1.2628144  1.7589234  2.067820292
## Colorado   0.02571456 0.3988593  0.8608085  1.864967207</code></pre>
</div>
<div id="medidas-de-disimilaridad" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Medidas de (di)similaridad<a href="clustering-jerárquico.html#medidas-de-disimilaridad" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Con el fin de decidir qué elementos deben ser combinados o divididos, se requieren métodos para medir la similaridad entre objetos. Existen muchos métodos para calcular la (di)similaridad de la información. Estas métricas ya se han considerados en capítulos anteriores.</p>
<p>En <em>R</em>, se puede usar la función <em>dist()</em> para calcular la distancia entre cada par de objetos en un conjunto de datos. El resultado de este cálculo es conocido como <strong>matriz de distancia de similitud</strong>.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="clustering-jerárquico.html#cb80-1" aria-hidden="true" tabindex="-1"></a>res_dist <span class="ot">&lt;-</span> <span class="fu">dist</span>(df, <span class="at">method =</span> <span class="st">&quot;euclidian&quot;</span>)</span>
<span id="cb80-2"><a href="clustering-jerárquico.html#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.matrix</span>(res_dist)[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##             Alabama   Alaska  Arizona Arkansas California Colorado
## Alabama    0.000000 2.703754 2.293520 1.289810   3.263110 2.651067
## Alaska     2.703754 0.000000 2.700643 2.826039   3.012541 2.326519
## Arizona    2.293520 2.700643 0.000000 2.717758   1.310484 1.365031
## Arkansas   1.289810 2.826039 2.717758 0.000000   3.763641 2.831051
## California 3.263110 3.012541 1.310484 3.763641   0.000000 1.287619
## Colorado   2.651067 2.326519 1.365031 2.831051   1.287619 0.000000</code></pre>
<p>Esta función usa los métodos de distancia:</p>
<ul>
<li><p>Euclidiana</p></li>
<li><p>Máxima</p></li>
<li><p>Manhattan</p></li>
<li><p>Canberra</p></li>
<li><p>Binaria</p></li>
<li><p>Minkowski</p></li>
</ul>
<p>Es importante mencionar que existen otras distancias como la geodésica que pueden implementarse a partir de otras librerías. Para distancias cortas y en general, la distancia euclidiana funciona muy bien.</p>
</div>
<div id="función-liga" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Función Liga<a href="clustering-jerárquico.html#función-liga" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La función liga toma la información de la distancia que regresa de la función <em>dist()</em> y agrupa pares de objetos en clusters basados en su similaridad. Posteriormente, estos clusters nuevos son ligados a otros para crear clusters más grandes. Este proceso es iterativo hasta que todos los objetos en el conjunto original de datos son ligados juntos en un árbol jerárquico. Este proceso se lleva a cabo con la función: <em>hclust()</em>.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="clustering-jerárquico.html#cb82-1" aria-hidden="true" tabindex="-1"></a>res_hc <span class="ot">&lt;-</span> <span class="fu">hclust</span>(<span class="at">d =</span> res_dist, <span class="at">method =</span> <span class="st">&quot;complete&quot;</span>)</span>
<span id="cb82-2"><a href="clustering-jerárquico.html#cb82-2" aria-hidden="true" tabindex="-1"></a>res_hc</span></code></pre></div>
<pre><code>## 
## Call:
## hclust(d = res_dist, method = &quot;complete&quot;)
## 
## Cluster method   : complete 
## Distance         : euclidean 
## Number of objects: 50</code></pre>
<p><strong>Donde:</strong></p>
<blockquote>
<p><strong>d:</strong> Es la estructura de disimilaridad producida por la función <em>dist()</em></p>
<p><strong>method:</strong> El método de liga de aglomeración a ser usado para el cálculo de distancia entre clusters. Los siguientes valores están permitidos: “single”, “complete”, “average”, “median”, “centroid”, “ward.D”, “ward.D2”.</p>
</blockquote>
<p>Existen múltiples métodos de aglomeración (i.e. métodos liga). Los más comunes se describen a continuación:</p>
<ul>
<li><strong>Liga máxima o completa:</strong> La distancia entre dos clusters es definida como el valor máximo de todos los pares de distancia entre los elementos dentro del cluster 1 y los elementos en el cluster 2. Tiende a producir clusters compactos.</li>
</ul>
<p><img src="img/04-hclus/09-complete_linkage.png" width="600pt" style="display: block; margin: auto;" /></p>
<ul>
<li><strong>Liga mínima o simple:</strong> La distancia entre dos clusters es definida como el valor mínimo de todas las parejas de distancias entre los elementos en el cluster 1 y los elementos en el cluster 2. Tiende a producir clusters largos o pobres.</li>
</ul>
<p><img src="img/04-hclus/10-single_linkage.png" width="600pt" style="display: block; margin: auto;" /></p>
<ul>
<li><strong>Liga promedio o media:</strong> La distancia entre dos clusters es definida como la distancia promedio entre los elementos en el cluster 1 y los elementos en el cluster 2.</li>
</ul>
<p><span class="math display">\[Dist(C_1, C_2)= \frac{1}{n_1+n_2}\sum_{i=1}^{n_1}{\sum_{j=1}^{n_2}{D(i,j)}}\]</span></p>
<p><img src="img/04-hclus/11-average_linkage2.png" width="600pt" style="display: block; margin: auto;" /></p>
<ul>
<li><strong>Liga centroide:</strong> La distancia entre dos clusters está definida como la distancia del centroide del cluster 1 (un vector de medias con tamaño de <em>p</em> variables) y el centroide del cluster 2.</li>
</ul>
<p><img src="img/04-hclus/12-centroid_linkage.png" width="600pt" style="display: block; margin: auto;" /></p>
<ul>
<li><strong>Método de varianza mínima de Ward:</strong> Este método en vez de analizar la distancia entre grupos, analiza la varianza, por lo que se encarga de minimizar el total de la varianza intra-cluster (inercia). En cada paso, el par de clusters con distancia mínima entre clusters son unidos. Este método dice que <strong>la distancia entre dos clusters A y B, es qué tanto la varianza respecto del centroide incrementará cuando sean unidos.</strong></li>
</ul>
<p><img src="img/04-hclus/13-wards_linkage.png" width="600pt" style="display: block; margin: auto;" /></p>
<p>Sin importar el método usado, en cada etapa del proceso de clustering, los 2 elementos con la distancia liga más corta son unidos en un solo cluster.</p>
<div class="infobox quicktip">
<p><strong>¡¡ TIP !!</strong></p>
<p>Las ligas: completa y Ward´s son preferidas generalmente</p>
</div>
</div>
</div>
<div id="dendogramas" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Dendogramas<a href="clustering-jerárquico.html#dendogramas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>La manera gráfica de representar el proceso de clustering jerárquico es mediante un dendograma. Los dendogramas pueden ser creados en <em>R</em> a partir de la función genérica <em>plot()</em>, sin embargo, se mostrarán otras funciones más novedosas para crear gráficos de mayor calidad.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="clustering-jerárquico.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb84-2"><a href="clustering-jerárquico.html#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="clustering-jerárquico.html#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_dend</span>(res_hc, <span class="at">cex =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-121-1.png" width="672" /></p>
<p>En el dendograma superior cada hoja corresponde a un objeto. En la medida en que nos movemos hacia arriba en el árbol, los objetos que son similar a otros están combinados en ramas, las cuales se fusionan a mayor altura.</p>
<p>La altura de la fusión, proveída en el eje vertical, indica la (di)similaridad/distancia entre dos objetos/clusters. Entre más alta sea la altura de la fusión, menos similares son los objetos/clusters. Esta altura es conocida como <strong>la distancia de cophenetic</strong> entre dos objetos.</p>
<p>A fin de identificar sub-grupos, se puede cortar el dendograma en cierta altura, como se describe en las siguientes secciones.</p>
<p>Para validar que las distancias en la altura reflejen las distancias originales de manera precisa, se hace uso de la correlación entre las distancias originales y la distancia de cophenetic:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="clustering-jerárquico.html#cb85-1" aria-hidden="true" tabindex="-1"></a>res_coph <span class="ot">&lt;-</span> <span class="fu">cophenetic</span>(res_hc)</span>
<span id="cb85-2"><a href="clustering-jerárquico.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.matrix</span>(res_coph)[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##             Alabama   Alaska  Arizona Arkansas California Colorado
## Alabama    0.000000 3.255433 4.420074 6.076642   4.420074 4.420074
## Alaska     3.255433 0.000000 4.420074 6.076642   4.420074 4.420074
## Arizona    4.420074 4.420074 0.000000 6.076642   2.445860 2.445860
## Arkansas   6.076642 6.076642 6.076642 0.000000   6.076642 6.076642
## California 4.420074 4.420074 2.445860 6.076642   0.000000 1.398859
## Colorado   4.420074 4.420074 2.445860 6.076642   1.398859 0.000000</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="clustering-jerárquico.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(res_coph, res_dist)</span></code></pre></div>
<pre><code>## [1] 0.6979437</code></pre>
<p><strong>Ejercicio</strong></p>
<ul>
<li>Usar las distintas ligas y determinar cuál de ellas funciona mejor (<em>Hint:</em> La que muestre correlación más alta entre las distancias originales y la distancia cophenetica)</li>
</ul>
<div id="selección-de-grupos" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Selección de grupos<a href="clustering-jerárquico.html#selección-de-grupos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Uno de los problemas del clustering jerárquico es que, NO dice cuántos clusters hay o dónde cortar el dendograma para formar los clusters.</p>
<p>Es posible cortar el árbol jerárquico a una altura dada con el fin de particionar los datos en clusters. La función <em>cutree()</em> puede ser usada para cortar el árbol en varios grupos al especificar ya el número deseado de grupos o la altura a cortar. Esta función regresa un vector que contiene el número de cluster de cada observación.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="clustering-jerárquico.html#cb89-1" aria-hidden="true" tabindex="-1"></a>groups_1 <span class="ot">&lt;-</span> <span class="fu">cutree</span>(res_hc, <span class="at">k =</span> <span class="dv">4</span>)</span>
<span id="cb89-2"><a href="clustering-jerárquico.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(groups_1)</span></code></pre></div>
<pre><code>##    Alabama     Alaska    Arizona   Arkansas California   Colorado 
##          1          1          2          3          2          2</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="clustering-jerárquico.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(groups_1)</span></code></pre></div>
<pre><code>## groups_1
##  1  2  3  4 
##  8 11 21 10</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="clustering-jerárquico.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_dend</span>(</span>
<span id="cb93-2"><a href="clustering-jerárquico.html#cb93-2" aria-hidden="true" tabindex="-1"></a> res_hc,</span>
<span id="cb93-3"><a href="clustering-jerárquico.html#cb93-3" aria-hidden="true" tabindex="-1"></a> <span class="at">k =</span> <span class="dv">4</span>,</span>
<span id="cb93-4"><a href="clustering-jerárquico.html#cb93-4" aria-hidden="true" tabindex="-1"></a> <span class="at">cex =</span> <span class="fl">0.5</span>,</span>
<span id="cb93-5"><a href="clustering-jerárquico.html#cb93-5" aria-hidden="true" tabindex="-1"></a> <span class="at">k_colors =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;purple&quot;</span>),</span>
<span id="cb93-6"><a href="clustering-jerárquico.html#cb93-6" aria-hidden="true" tabindex="-1"></a> <span class="at">color_labels_by_k =</span> <span class="cn">TRUE</span>,</span>
<span id="cb93-7"><a href="clustering-jerárquico.html#cb93-7" aria-hidden="true" tabindex="-1"></a> <span class="at">rect =</span> <span class="cn">TRUE</span></span>
<span id="cb93-8"><a href="clustering-jerárquico.html#cb93-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-124-1.png" width="672" /></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="clustering-jerárquico.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_dend</span>(</span>
<span id="cb94-2"><a href="clustering-jerárquico.html#cb94-2" aria-hidden="true" tabindex="-1"></a> res_hc,</span>
<span id="cb94-3"><a href="clustering-jerárquico.html#cb94-3" aria-hidden="true" tabindex="-1"></a> <span class="at">h =</span> <span class="dv">7</span>,</span>
<span id="cb94-4"><a href="clustering-jerárquico.html#cb94-4" aria-hidden="true" tabindex="-1"></a> <span class="at">cex =</span> <span class="fl">0.5</span>,</span>
<span id="cb94-5"><a href="clustering-jerárquico.html#cb94-5" aria-hidden="true" tabindex="-1"></a> <span class="at">k_colors =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>),</span>
<span id="cb94-6"><a href="clustering-jerárquico.html#cb94-6" aria-hidden="true" tabindex="-1"></a> <span class="at">color_labels_by_k =</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-7"><a href="clustering-jerárquico.html#cb94-7" aria-hidden="true" tabindex="-1"></a> <span class="at">rect =</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-8"><a href="clustering-jerárquico.html#cb94-8" aria-hidden="true" tabindex="-1"></a> <span class="at">rect_border =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>),</span>
<span id="cb94-9"><a href="clustering-jerárquico.html#cb94-9" aria-hidden="true" tabindex="-1"></a> <span class="at">rect_fill =</span> T,</span>
<span id="cb94-10"><a href="clustering-jerárquico.html#cb94-10" aria-hidden="true" tabindex="-1"></a> <span class="at">horiz =</span> T</span>
<span id="cb94-11"><a href="clustering-jerárquico.html#cb94-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-125-1.png" width="672" /></p>
<p>Algunas variaciones estéticas sobre un dendograma se pueden realizar al cambiar determinados parámetros. Por ejemplo:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="clustering-jerárquico.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_dend</span>(</span>
<span id="cb95-2"><a href="clustering-jerárquico.html#cb95-2" aria-hidden="true" tabindex="-1"></a> res_hc,</span>
<span id="cb95-3"><a href="clustering-jerárquico.html#cb95-3" aria-hidden="true" tabindex="-1"></a> <span class="at">k =</span> <span class="dv">4</span>,</span>
<span id="cb95-4"><a href="clustering-jerárquico.html#cb95-4" aria-hidden="true" tabindex="-1"></a> <span class="at">cex =</span> <span class="fl">0.5</span>,</span>
<span id="cb95-5"><a href="clustering-jerárquico.html#cb95-5" aria-hidden="true" tabindex="-1"></a> <span class="at">k_colors =</span> <span class="st">&quot;jco&quot;</span>,</span>
<span id="cb95-6"><a href="clustering-jerárquico.html#cb95-6" aria-hidden="true" tabindex="-1"></a> <span class="at">type =</span> <span class="st">&quot;circular&quot;</span>,</span>
<span id="cb95-7"><a href="clustering-jerárquico.html#cb95-7" aria-hidden="true" tabindex="-1"></a> <span class="at">show_labels =</span> <span class="cn">TRUE</span></span>
<span id="cb95-8"><a href="clustering-jerárquico.html#cb95-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-126-1.png" width="672" /></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="clustering-jerárquico.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_dend</span>(</span>
<span id="cb96-2"><a href="clustering-jerárquico.html#cb96-2" aria-hidden="true" tabindex="-1"></a> res_hc,</span>
<span id="cb96-3"><a href="clustering-jerárquico.html#cb96-3" aria-hidden="true" tabindex="-1"></a> <span class="at">k =</span> <span class="dv">4</span>,</span>
<span id="cb96-4"><a href="clustering-jerárquico.html#cb96-4" aria-hidden="true" tabindex="-1"></a> <span class="at">cex =</span> <span class="fl">0.5</span>,</span>
<span id="cb96-5"><a href="clustering-jerárquico.html#cb96-5" aria-hidden="true" tabindex="-1"></a> <span class="at">k_colors =</span> <span class="st">&quot;jco&quot;</span>,</span>
<span id="cb96-6"><a href="clustering-jerárquico.html#cb96-6" aria-hidden="true" tabindex="-1"></a> <span class="at">type =</span> <span class="st">&quot;phylogenic&quot;</span>,</span>
<span id="cb96-7"><a href="clustering-jerárquico.html#cb96-7" aria-hidden="true" tabindex="-1"></a> <span class="at">phylo_layout =</span> <span class="st">&quot;layout.gem&quot;</span>,</span>
<span id="cb96-8"><a href="clustering-jerárquico.html#cb96-8" aria-hidden="true" tabindex="-1"></a> <span class="at">repel =</span> T,</span>
<span id="cb96-9"><a href="clustering-jerárquico.html#cb96-9" aria-hidden="true" tabindex="-1"></a> <span class="at">show_labels =</span> <span class="cn">TRUE</span></span>
<span id="cb96-10"><a href="clustering-jerárquico.html#cb96-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-127-1.png" width="672" /></p>
<p>Usando la función <em>f_viz_cluster()</em> también es posible visualizar los clusters a través de un gráfico de dispersión. Las observaciones son presentadas en puntos usando el análisis de componentes principales.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="clustering-jerárquico.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_cluster</span>(</span>
<span id="cb97-2"><a href="clustering-jerárquico.html#cb97-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">list</span>(<span class="at">data =</span> df, <span class="at">cluster =</span> groups_1),</span>
<span id="cb97-3"><a href="clustering-jerárquico.html#cb97-3" aria-hidden="true" tabindex="-1"></a> <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;purple&quot;</span>),</span>
<span id="cb97-4"><a href="clustering-jerárquico.html#cb97-4" aria-hidden="true" tabindex="-1"></a> <span class="at">ellipse.type =</span> <span class="st">&quot;convex&quot;</span>,</span>
<span id="cb97-5"><a href="clustering-jerárquico.html#cb97-5" aria-hidden="true" tabindex="-1"></a> <span class="at">repel =</span> T,</span>
<span id="cb97-6"><a href="clustering-jerárquico.html#cb97-6" aria-hidden="true" tabindex="-1"></a> <span class="at">show.clust.cent =</span> F</span>
<span id="cb97-7"><a href="clustering-jerárquico.html#cb97-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-128-1.png" width="672" /></p>
<p>Finalmente, es importante mencionar que la librería <em>cluster</em> ofrece un par de funciones que resumen todo el proceso anterior (scale, dist y hclus). Las funciones se usan de la siguiente forma:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="clustering-jerárquico.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cluster)</span>
<span id="cb98-2"><a href="clustering-jerárquico.html#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="clustering-jerárquico.html#cb98-3" aria-hidden="true" tabindex="-1"></a>res_agnes <span class="ot">&lt;-</span> <span class="fu">agnes</span>(</span>
<span id="cb98-4"><a href="clustering-jerárquico.html#cb98-4" aria-hidden="true" tabindex="-1"></a> <span class="at">x =</span> USArrests,</span>
<span id="cb98-5"><a href="clustering-jerárquico.html#cb98-5" aria-hidden="true" tabindex="-1"></a> <span class="at">stand =</span> T,</span>
<span id="cb98-6"><a href="clustering-jerárquico.html#cb98-6" aria-hidden="true" tabindex="-1"></a> <span class="at">metric =</span> <span class="st">&quot;euclidian&quot;</span>,</span>
<span id="cb98-7"><a href="clustering-jerárquico.html#cb98-7" aria-hidden="true" tabindex="-1"></a> <span class="at">method =</span> <span class="st">&quot;ward&quot;</span></span>
<span id="cb98-8"><a href="clustering-jerárquico.html#cb98-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb98-9"><a href="clustering-jerárquico.html#cb98-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-10"><a href="clustering-jerárquico.html#cb98-10" aria-hidden="true" tabindex="-1"></a>res_diana <span class="ot">&lt;-</span> <span class="fu">diana</span>(</span>
<span id="cb98-11"><a href="clustering-jerárquico.html#cb98-11" aria-hidden="true" tabindex="-1"></a> <span class="at">x =</span> USArrests,</span>
<span id="cb98-12"><a href="clustering-jerárquico.html#cb98-12" aria-hidden="true" tabindex="-1"></a> <span class="at">stand =</span> T,</span>
<span id="cb98-13"><a href="clustering-jerárquico.html#cb98-13" aria-hidden="true" tabindex="-1"></a> <span class="at">metric =</span> <span class="st">&quot;euclidian&quot;</span></span>
<span id="cb98-14"><a href="clustering-jerárquico.html#cb98-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb98-15"><a href="clustering-jerárquico.html#cb98-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-16"><a href="clustering-jerárquico.html#cb98-16" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_dend</span>(</span>
<span id="cb98-17"><a href="clustering-jerárquico.html#cb98-17" aria-hidden="true" tabindex="-1"></a> res_diana, </span>
<span id="cb98-18"><a href="clustering-jerárquico.html#cb98-18" aria-hidden="true" tabindex="-1"></a> <span class="at">cex =</span> <span class="fl">0.6</span>, </span>
<span id="cb98-19"><a href="clustering-jerárquico.html#cb98-19" aria-hidden="true" tabindex="-1"></a> <span class="at">k =</span> <span class="dv">4</span>,</span>
<span id="cb98-20"><a href="clustering-jerárquico.html#cb98-20" aria-hidden="true" tabindex="-1"></a> <span class="at">color_labels_by_k =</span> <span class="cn">TRUE</span>,</span>
<span id="cb98-21"><a href="clustering-jerárquico.html#cb98-21" aria-hidden="true" tabindex="-1"></a> <span class="at">rect =</span> <span class="cn">TRUE</span></span>
<span id="cb98-22"><a href="clustering-jerárquico.html#cb98-22" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-129-1.png" width="672" /></p>
</div>
</div>
<div id="comparación-de-dendogramas" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Comparación de dendogramas<a href="clustering-jerárquico.html#comparación-de-dendogramas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Luego de aprender a crear dendogramas, se procederá a comparar dos dendogramas usando la librería <em>dendextend</em>, la cual proveé las funciones <em>tanglegram()</em> y <em>cor.dendlist()</em>.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="clustering-jerárquico.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dendextend)</span>
<span id="cb99-2"><a href="clustering-jerárquico.html#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="clustering-jerárquico.html#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">15937</span>)</span>
<span id="cb99-4"><a href="clustering-jerárquico.html#cb99-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df[<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>, <span class="dv">30</span>),]</span>
<span id="cb99-5"><a href="clustering-jerárquico.html#cb99-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-6"><a href="clustering-jerárquico.html#cb99-6" aria-hidden="true" tabindex="-1"></a>res_dist2 <span class="ot">&lt;-</span> <span class="fu">dist</span>(df2, <span class="at">method =</span> <span class="st">&quot;euclidian&quot;</span>)</span>
<span id="cb99-7"><a href="clustering-jerárquico.html#cb99-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-8"><a href="clustering-jerárquico.html#cb99-8" aria-hidden="true" tabindex="-1"></a>hc1 <span class="ot">&lt;-</span> <span class="fu">hclust</span>(res_dist2, <span class="at">method =</span> <span class="st">&quot;average&quot;</span>)</span>
<span id="cb99-9"><a href="clustering-jerárquico.html#cb99-9" aria-hidden="true" tabindex="-1"></a>hc2 <span class="ot">&lt;-</span> <span class="fu">hclust</span>(res_dist2, <span class="at">method =</span> <span class="st">&quot;ward.D&quot;</span>)</span>
<span id="cb99-10"><a href="clustering-jerárquico.html#cb99-10" aria-hidden="true" tabindex="-1"></a>hc3 <span class="ot">&lt;-</span> <span class="fu">hclust</span>(res_dist2, <span class="at">method =</span> <span class="st">&quot;complete&quot;</span>)</span>
<span id="cb99-11"><a href="clustering-jerárquico.html#cb99-11" aria-hidden="true" tabindex="-1"></a>hc4 <span class="ot">&lt;-</span> <span class="fu">hclust</span>(res_dist2, <span class="at">method =</span> <span class="st">&quot;median&quot;</span>)</span>
<span id="cb99-12"><a href="clustering-jerárquico.html#cb99-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-13"><a href="clustering-jerárquico.html#cb99-13" aria-hidden="true" tabindex="-1"></a>dend1 <span class="ot">&lt;-</span> <span class="fu">as.dendrogram</span>(hc1)</span>
<span id="cb99-14"><a href="clustering-jerárquico.html#cb99-14" aria-hidden="true" tabindex="-1"></a>dend2 <span class="ot">&lt;-</span> <span class="fu">as.dendrogram</span>(hc2)</span>
<span id="cb99-15"><a href="clustering-jerárquico.html#cb99-15" aria-hidden="true" tabindex="-1"></a>dend3 <span class="ot">&lt;-</span> <span class="fu">as.dendrogram</span>(hc3)</span>
<span id="cb99-16"><a href="clustering-jerárquico.html#cb99-16" aria-hidden="true" tabindex="-1"></a>dend4 <span class="ot">&lt;-</span> <span class="fu">as.dendrogram</span>(hc4)</span>
<span id="cb99-17"><a href="clustering-jerárquico.html#cb99-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-18"><a href="clustering-jerárquico.html#cb99-18" aria-hidden="true" tabindex="-1"></a>dend_list <span class="ot">&lt;-</span> <span class="fu">dendlist</span>(</span>
<span id="cb99-19"><a href="clustering-jerárquico.html#cb99-19" aria-hidden="true" tabindex="-1"></a> <span class="st">&quot;average&quot;</span> <span class="ot">=</span> dend1, </span>
<span id="cb99-20"><a href="clustering-jerárquico.html#cb99-20" aria-hidden="true" tabindex="-1"></a> <span class="st">&quot;ward´s&quot;</span> <span class="ot">=</span> dend2, </span>
<span id="cb99-21"><a href="clustering-jerárquico.html#cb99-21" aria-hidden="true" tabindex="-1"></a> <span class="st">&quot;complete&quot;</span> <span class="ot">=</span> dend3, </span>
<span id="cb99-22"><a href="clustering-jerárquico.html#cb99-22" aria-hidden="true" tabindex="-1"></a> <span class="st">&quot;median&quot;</span> <span class="ot">=</span> dend4</span>
<span id="cb99-23"><a href="clustering-jerárquico.html#cb99-23" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb99-24"><a href="clustering-jerárquico.html#cb99-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-25"><a href="clustering-jerárquico.html#cb99-25" aria-hidden="true" tabindex="-1"></a><span class="fu">tanglegram</span>(</span>
<span id="cb99-26"><a href="clustering-jerárquico.html#cb99-26" aria-hidden="true" tabindex="-1"></a> dend1, </span>
<span id="cb99-27"><a href="clustering-jerárquico.html#cb99-27" aria-hidden="true" tabindex="-1"></a> dend2,</span>
<span id="cb99-28"><a href="clustering-jerárquico.html#cb99-28" aria-hidden="true" tabindex="-1"></a> <span class="at">sort =</span> T,</span>
<span id="cb99-29"><a href="clustering-jerárquico.html#cb99-29" aria-hidden="true" tabindex="-1"></a> <span class="at">margin_inner =</span> <span class="fl">6.5</span>,</span>
<span id="cb99-30"><a href="clustering-jerárquico.html#cb99-30" aria-hidden="true" tabindex="-1"></a> <span class="at">highlight_distinct_edges =</span> F,</span>
<span id="cb99-31"><a href="clustering-jerárquico.html#cb99-31" aria-hidden="true" tabindex="-1"></a> <span class="at">common_subtrees_color_lines =</span> T,</span>
<span id="cb99-32"><a href="clustering-jerárquico.html#cb99-32" aria-hidden="true" tabindex="-1"></a> <span class="at">common_subtrees_color_branches =</span> T,</span>
<span id="cb99-33"><a href="clustering-jerárquico.html#cb99-33" aria-hidden="true" tabindex="-1"></a> <span class="at">main =</span> <span class="st">&quot;Vs&quot;</span>,</span>
<span id="cb99-34"><a href="clustering-jerárquico.html#cb99-34" aria-hidden="true" tabindex="-1"></a> <span class="at">main_left =</span> <span class="st">&quot;Average Linkage&quot;</span>,</span>
<span id="cb99-35"><a href="clustering-jerárquico.html#cb99-35" aria-hidden="true" tabindex="-1"></a> <span class="at">main_right =</span> <span class="st">&quot;Ward´s Linkage&quot;</span>,</span>
<span id="cb99-36"><a href="clustering-jerárquico.html#cb99-36" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-130-1.png" width="672" /></p>
<p>A partir del gráfico anterior, se realiza la comparación de la diferencia en la ubicación de algunos elementos. Esta diferencia dependerá por completo de la metodología de aglomeración utilizada.</p>
<p>Otra forma de comparar la similitud entre clusters es a partir de una matriz de correlaciones.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="clustering-jerárquico.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb100-2"><a href="clustering-jerárquico.html#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="clustering-jerárquico.html#cb100-3" aria-hidden="true" tabindex="-1"></a>cors <span class="ot">&lt;-</span> <span class="fu">cor.dendlist</span>(dend_list, <span class="at">method =</span> <span class="st">&quot;cophenetic&quot;</span>)</span>
<span id="cb100-4"><a href="clustering-jerárquico.html#cb100-4" aria-hidden="true" tabindex="-1"></a>cors</span></code></pre></div>
<pre><code>##            average     ward´s  complete     median
## average  1.0000000 0.93419413 0.5738468 0.12344011
## ward´s   0.9341941 1.00000000 0.5415380 0.08524404
## complete 0.5738468 0.54153798 1.0000000 0.16924366
## median   0.1234401 0.08524404 0.1692437 1.00000000</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="clustering-jerárquico.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(</span>
<span id="cb102-2"><a href="clustering-jerárquico.html#cb102-2" aria-hidden="true" tabindex="-1"></a> <span class="at">corr =</span> cors, </span>
<span id="cb102-3"><a href="clustering-jerárquico.html#cb102-3" aria-hidden="true" tabindex="-1"></a> <span class="at">method =</span> <span class="st">&quot;ellipse&quot;</span></span>
<span id="cb102-4"><a href="clustering-jerárquico.html#cb102-4" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-131-1.png" width="672" />
<strong>Ejercicio:</strong></p>
<p>Comparar clusters de Marginación de entidades con clusters de CONAPO y comparar interpretaciones de cada grupo</p>
</div>
<div id="heatmaps" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Heatmaps<a href="clustering-jerárquico.html#heatmaps" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Otro modo de visualizar el clustering jerárquico es a través de los mapas de color. Existen diversas alternativas para mostrar estas aglomeraciones. Los heatmaps, permiten visualizar clusters de individuos y de características. Las funciones implementadas son:</p>
<ul>
<li><em>gplots::heatmap.2()</em></li>
<li><em>pheatmap::pheatmap()</em></li>
<li><em>d3heatmap::d3heatmap()</em></li>
<li><em>ComplexHeatmap::Heatmap()</em></li>
</ul>
<p>En las siguientes secciones se mostrarán diversas visualizaciones de clusters, las cuales podrán ser por individuos, por características o ambas. Como primer paso, se comienza con la preparación de datos.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="clustering-jerárquico.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb103-2"><a href="clustering-jerárquico.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb103-3"><a href="clustering-jerárquico.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gplots)</span>
<span id="cb103-4"><a href="clustering-jerárquico.html#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb103-5"><a href="clustering-jerárquico.html#cb103-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-6"><a href="clustering-jerárquico.html#cb103-6" aria-hidden="true" tabindex="-1"></a>indice_marg <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&#39;data/IMEF_2010.dbf&#39;</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb103-7"><a href="clustering-jerárquico.html#cb103-7" aria-hidden="true" tabindex="-1"></a>indice_marg <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 32
## Columns: 16
## $ CVE_ENT &lt;chr&gt; &quot;01&quot;, &quot;02&quot;, &quot;03&quot;, &quot;04&quot;, &quot;05&quot;, &quot;06&quot;, &quot;07&quot;, &quot;08&quot;, &quot;09&quot;, &quot;10&quot;, &quot;1…
## $ AÑO     &lt;int&gt; 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 20…
## $ POB_TOT &lt;int&gt; 1184996, 3155070, 637026, 822441, 2748391, 650555, 4796580, 34…
## $ ANALF   &lt;dbl&gt; 3.274040, 2.600783, 3.234464, 8.370643, 2.645050, 5.157943, 17…
## $ SPRIM   &lt;dbl&gt; 14.754823, 12.987567, 14.273833, 22.541207, 12.168029, 18.4761…
## $ OVSDE   &lt;dbl&gt; 1.0649743, 0.4322072, 0.9436751, 6.4196750, 1.0916308, 0.68577…
## $ OVSEE   &lt;dbl&gt; 0.62347891, 0.94517891, 2.84464884, 2.59080046, 0.53707721, 0.…
## $ OVSAE   &lt;dbl&gt; 0.9854257, 3.5616214, 7.0865085, 9.7378176, 1.3908497, 1.17060…
## $ VHAC    &lt;dbl&gt; 30.33066, 29.05839, 31.73806, 45.96720, 30.26891, 31.32052, 53…
## $ OVPT    &lt;dbl&gt; 1.761813, 3.398537, 5.814081, 4.500699, 1.423701, 4.691477, 15…
## $ PL_5000 &lt;dbl&gt; 25.1626166, 10.3491523, 15.6188287, 30.8755279, 12.1486353, 14…
## $ PO2SM   &lt;dbl&gt; 33.64880, 21.86970, 23.29986, 45.51076, 30.04270, 32.04402, 69…
## $ IM      &lt;dbl&gt; -0.91086057, -1.14014880, -0.68128749, 0.43357139, -1.14000448…
## $ GM      &lt;chr&gt; &quot;Bajo&quot;, &quot;Muy bajo&quot;, &quot;Bajo&quot;, &quot;Alto&quot;, &quot;Muy bajo&quot;, &quot;Bajo&quot;, &quot;Muy a…
## $ LUGAR   &lt;int&gt; 28, 30, 23, 10, 29, 26, 2, 21, 32, 15, 14, 1, 6, 27, 22, 8, 19…
## $ NOM_ENT &lt;chr&gt; &quot;Aguascalientes&quot;, &quot;Baja California&quot;, &quot;Baja California Sur&quot;, &quot;C…</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="clustering-jerárquico.html#cb105-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> indice_marg <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="clustering-jerárquico.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ANALF<span class="sc">:</span>PO2SM) <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="clustering-jerárquico.html#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale</span>(<span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">TRUE</span>)</span>
<span id="cb105-4"><a href="clustering-jerárquico.html#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="clustering-jerárquico.html#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(df) <span class="ot">&lt;-</span> indice_marg<span class="sc">$</span>NOM_ENT</span>
<span id="cb105-6"><a href="clustering-jerárquico.html#cb105-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-7"><a href="clustering-jerárquico.html#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="fu">heatmap.2</span>(</span>
<span id="cb105-8"><a href="clustering-jerárquico.html#cb105-8" aria-hidden="true" tabindex="-1"></a>  df,</span>
<span id="cb105-9"><a href="clustering-jerárquico.html#cb105-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb105-10"><a href="clustering-jerárquico.html#cb105-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">cexCol =</span> <span class="fl">0.7</span>,</span>
<span id="cb105-11"><a href="clustering-jerárquico.html#cb105-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">cexRow =</span> <span class="fl">0.5</span>,</span>
<span id="cb105-12"><a href="clustering-jerárquico.html#cb105-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Heatmap - Marginación&quot;</span>,</span>
<span id="cb105-13"><a href="clustering-jerárquico.html#cb105-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">bluered</span>(<span class="dv">32</span>),</span>
<span id="cb105-14"><a href="clustering-jerárquico.html#cb105-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">trace =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb105-15"><a href="clustering-jerárquico.html#cb105-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">density.info =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb105-16"><a href="clustering-jerárquico.html#cb105-16" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-132-1.png" width="672" /></p>
<p>El dendograma anterior tiene la ventaja de ser simple y limpio. Los parámetros son sencillos.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="clustering-jerárquico.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pheatmap)</span>
<span id="cb106-2"><a href="clustering-jerárquico.html#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="clustering-jerárquico.html#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pheatmap</span>(</span>
<span id="cb106-4"><a href="clustering-jerárquico.html#cb106-4" aria-hidden="true" tabindex="-1"></a>  df,</span>
<span id="cb106-5"><a href="clustering-jerárquico.html#cb106-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">cutree_rows =</span> <span class="dv">5</span>,</span>
<span id="cb106-6"><a href="clustering-jerárquico.html#cb106-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">cutree_cols =</span> <span class="dv">2</span>,</span>
<span id="cb106-7"><a href="clustering-jerárquico.html#cb106-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering_distance_rows =</span> <span class="st">&quot;euclidean&quot;</span>,</span>
<span id="cb106-8"><a href="clustering-jerárquico.html#cb106-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering_distance_cols =</span> <span class="st">&quot;euclidean&quot;</span>,</span>
<span id="cb106-9"><a href="clustering-jerárquico.html#cb106-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering_method =</span> <span class="st">&quot;ward.D&quot;</span>,</span>
<span id="cb106-10"><a href="clustering-jerárquico.html#cb106-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Heatmap - Ward´s Clustering&quot;</span></span>
<span id="cb106-11"><a href="clustering-jerárquico.html#cb106-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-133-1.png" width="672" /></p>
<p>Este segundo dendograma es uno de los más limpios y completos que hay. Se segmentan tanto renglones como columnas de acuerdo con la metodología específicada de clustering.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="clustering-jerárquico.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;talgalili/d3heatmap&quot;)</span></span>
<span id="cb107-2"><a href="clustering-jerárquico.html#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="clustering-jerárquico.html#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(d3heatmap)</span>
<span id="cb107-4"><a href="clustering-jerárquico.html#cb107-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-5"><a href="clustering-jerárquico.html#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="fu">d3heatmap</span>(</span>
<span id="cb107-6"><a href="clustering-jerárquico.html#cb107-6" aria-hidden="true" tabindex="-1"></a>  df,</span>
<span id="cb107-7"><a href="clustering-jerárquico.html#cb107-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">k_row =</span> <span class="dv">5</span>,</span>
<span id="cb107-8"><a href="clustering-jerárquico.html#cb107-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">k_col =</span> <span class="dv">2</span>,</span>
<span id="cb107-9"><a href="clustering-jerárquico.html#cb107-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Interactive Heatmap&quot;</span>,</span>
<span id="cb107-10"><a href="clustering-jerárquico.html#cb107-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">&quot;Variables&quot;</span>,</span>
<span id="cb107-11"><a href="clustering-jerárquico.html#cb107-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">&quot;Entidades&quot;</span>,</span>
<span id="cb107-12"><a href="clustering-jerárquico.html#cb107-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">cexRow =</span> <span class="fl">0.7</span>,</span>
<span id="cb107-13"><a href="clustering-jerárquico.html#cb107-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">cexCol =</span> <span class="fl">0.7</span></span>
<span id="cb107-14"><a href="clustering-jerárquico.html#cb107-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="htmlwidget-4edc2db166f7c4feab5f" style="width:672px;height:480px;" class="d3heatmap html-widget"></div>
<script type="application/json" data-for="htmlwidget-4edc2db166f7c4feab5f">{"x":{"rows":{"members":32,"height":10.7166344858809,"edgePar":{"col":""},"children":[{"members":3,"height":4.32745847769586,"edgePar":{"col":"#CC476B"},"children":[{"members":2,"height":2.00015100589387,"edgePar":{"col":"#CC476B"},"children":[{"members":1,"height":0,"label":"Chiapas","edgePar":{"col":"#CC476B"}},{"members":1,"height":0,"label":"Oaxaca","edgePar":{"col":"#CC476B"}}]},{"members":1,"height":0,"label":"Guerrero","edgePar":{"col":"#CC476B"}}]},{"members":29,"height":6.7294481119355,"edgePar":{"col":""},"children":[{"members":22,"height":4.97655310157856,"edgePar":{"col":""},"children":[{"members":10,"height":4.39583430700797,"edgePar":{"col":""},"children":[{"members":5,"height":2.57942456944183,"edgePar":{"col":"#917600"},"children":[{"members":4,"height":2.38763231865308,"edgePar":{"col":"#917600"},"children":[{"members":3,"height":2.05143431225589,"edgePar":{"col":"#917600"},"children":[{"members":2,"height":1.69817980225807,"edgePar":{"col":"#917600"},"children":[{"members":1,"height":0,"label":"Puebla","edgePar":{"col":"#917600"}},{"members":1,"height":0,"label":"Michoacán de Ocampo","edgePar":{"col":"#917600"}}]},{"members":1,"height":0,"label":"Hidalgo","edgePar":{"col":"#917600"}}]},{"members":1,"height":0,"label":"Veracruz de Ignacio de la Llave","edgePar":{"col":"#917600"}}]},{"members":1,"height":0,"label":"Tabasco","edgePar":{"col":"#917600"}}]},{"members":5,"height":3.20901019923776,"edgePar":{"col":"#009232"},"children":[{"members":2,"height":2.25058526166151,"edgePar":{"col":"#009232"},"children":[{"members":1,"height":0,"label":"Yucatán","edgePar":{"col":"#009232"}},{"members":1,"height":0,"label":"Campeche","edgePar":{"col":"#009232"}}]},{"members":3,"height":2.47293256978167,"edgePar":{"col":"#009232"},"children":[{"members":2,"height":1.39713641825278,"edgePar":{"col":"#009232"},"children":[{"members":1,"height":0,"label":"Zacatecas","edgePar":{"col":"#009232"}},{"members":1,"height":0,"label":"Guanajuato","edgePar":{"col":"#009232"}}]},{"members":1,"height":0,"label":"Tlaxcala","edgePar":{"col":"#009232"}}]}]}]},{"members":12,"height":3.66567699203819,"edgePar":{"col":"#008FB7"},"children":[{"members":3,"height":1.88379756420768,"edgePar":{"col":"#008FB7"},"children":[{"members":1,"height":0,"label":"San Luis Potosí","edgePar":{"col":"#008FB7"}},{"members":2,"height":1.04805852727125,"edgePar":{"col":"#008FB7"},"children":[{"members":1,"height":0,"label":"Nayarit","edgePar":{"col":"#008FB7"}},{"members":1,"height":0,"label":"Durango","edgePar":{"col":"#008FB7"}}]}]},{"members":9,"height":2.80853973606134,"edgePar":{"col":"#008FB7"},"children":[{"members":2,"height":1.56549611762751,"edgePar":{"col":"#008FB7"},"children":[{"members":1,"height":0,"label":"Chihuahua","edgePar":{"col":"#008FB7"}},{"members":1,"height":0,"label":"Baja California Sur","edgePar":{"col":"#008FB7"}}]},{"members":7,"height":2.30559561864156,"edgePar":{"col":"#008FB7"},"children":[{"members":3,"height":2.05644303716231,"edgePar":{"col":"#008FB7"},"children":[{"members":1,"height":0,"label":"Querétaro","edgePar":{"col":"#008FB7"}},{"members":2,"height":1.27442575337637,"edgePar":{"col":"#008FB7"},"children":[{"members":1,"height":0,"label":"Sinaloa","edgePar":{"col":"#008FB7"}},{"members":1,"height":0,"label":"Morelos","edgePar":{"col":"#008FB7"}}]}]},{"members":4,"height":1.51727726336337,"edgePar":{"col":"#008FB7"},"children":[{"members":1,"height":0,"label":"Quintana Roo","edgePar":{"col":"#008FB7"}},{"members":3,"height":1.13323950777783,"edgePar":{"col":"#008FB7"},"children":[{"members":1,"height":0,"label":"México","edgePar":{"col":"#008FB7"}},{"members":2,"height":0.678399345988222,"edgePar":{"col":"#008FB7"},"children":[{"members":1,"height":0,"label":"Sonora","edgePar":{"col":"#008FB7"}},{"members":1,"height":0,"label":"Tamaulipas","edgePar":{"col":"#008FB7"}}]}]}]}]}]}]}]},{"members":7,"height":2.16764492917252,"edgePar":{"col":"#A352D1"},"children":[{"members":4,"height":1.32799266454119,"edgePar":{"col":"#A352D1"},"children":[{"members":2,"height":0.755799358422848,"edgePar":{"col":"#A352D1"},"children":[{"members":1,"height":0,"label":"Colima","edgePar":{"col":"#A352D1"}},{"members":1,"height":0,"label":"Jalisco","edgePar":{"col":"#A352D1"}}]},{"members":2,"height":0.945936403145833,"edgePar":{"col":"#A352D1"},"children":[{"members":1,"height":0,"label":"Aguascalientes","edgePar":{"col":"#A352D1"}},{"members":1,"height":0,"label":"Coahuila de Zaragoza","edgePar":{"col":"#A352D1"}}]}]},{"members":3,"height":1.40416507744355,"edgePar":{"col":"#A352D1"},"children":[{"members":1,"height":0,"label":"Distrito Federal","edgePar":{"col":"#A352D1"}},{"members":2,"height":0.81937603067039,"edgePar":{"col":"#A352D1"},"children":[{"members":1,"height":0,"label":"Baja California","edgePar":{"col":"#A352D1"}},{"members":1,"height":0,"label":"Nuevo León","edgePar":{"col":"#A352D1"}}]}]}]}]}]},"cols":{"members":9,"height":5.87418653496083,"edgePar":{"col":""},"children":[{"members":2,"height":5.63947714322864,"edgePar":{"col":"#CC476B"},"children":[{"members":1,"height":0,"label":"OVSEE","edgePar":{"col":"#CC476B"}},{"members":1,"height":0,"label":"OVSDE","edgePar":{"col":"#CC476B"}}]},{"members":7,"height":4.65997376767981,"edgePar":{"col":"#009681"},"children":[{"members":3,"height":4.42873218683755,"edgePar":{"col":"#009681"},"children":[{"members":2,"height":2.33094294068168,"edgePar":{"col":"#009681"},"children":[{"members":1,"height":0,"label":"OVSAE","edgePar":{"col":"#009681"}},{"members":1,"height":0,"label":"OVPT","edgePar":{"col":"#009681"}}]},{"members":1,"height":0,"label":"VHAC","edgePar":{"col":"#009681"}}]},{"members":4,"height":3.54962777906017,"edgePar":{"col":"#009681"},"children":[{"members":1,"height":0,"label":"PL_5000","edgePar":{"col":"#009681"}},{"members":3,"height":3.0273182009428,"edgePar":{"col":"#009681"},"children":[{"members":2,"height":1.88769777294229,"edgePar":{"col":"#009681"},"children":[{"members":1,"height":0,"label":"SPRIM","edgePar":{"col":"#009681"}},{"members":1,"height":0,"label":"ANALF","edgePar":{"col":"#009681"}}]},{"members":1,"height":0,"label":"PO2SM","edgePar":{"col":"#009681"}}]}]}]}]},"matrix":{"data":["1.363","0.288","1.954","1.961","2.511","1.654","2.483","2.61","2.556","2.19","0.016","2.129","2.734","1.429","1.876","2.002","2.25","1.539","1.778","4.029","2.967","2.793","1.966","1.158","1.672","2.354","1.3","-0.235","-0.22","0.594","0.743","1.143","0.479","0.724","0.849","1.091","-0.209","-0.035","0.001","0.978","-0.092","0.605","1.318","0.805","0.353","0.386","0.538","0.143","0.189","0.129","1.706","0.362","0.817","0.824","0.695","-0.353","1.564","1.277","0.463","0.947","1.272","1.101","0.938","-0.586","-0.252","1.427","0.054","0.933","1.399","0.166","0.062","0.215","-0.179","2.235","-0.802","-0.73","0.9","-0.263","0.762","0.582","1.161","0.451","0.638","0.23","-0.383","1.346","0.016","0.344","0.362","0.506","-0.44","0.708","-0.358","-0.636","-0.573","1.067","0.658","-0.296","0.74","-0.364","0.631","-0.367","-0.435","-0.078","0.247","0.559","0.328","-0.024","-0.731","-0.324","-0.898","-0.545","0.905","0.351","-0.686","-0.38","1.136","1.429","0.01","0.835","0.583","-0.348","0.575","0.438","0.266","0.607","1.317","0.376","-0.079","-0.408","-0.452","0.518","0.192","-0.114","-0.123","1.638","0.491","-0.317","0.146","-0.618","0.339","-0.211","-0.705","0.094","1.337","-0.336","-0.423","-0.583","-1.235","-0.823","-0.605","-0.74","-0.301","0.639","-0.774","-0.132","-0.107","-0.744","-0.91","-0.869","-0.849","-1.365","0.009","0.611","-0.426","-0.523","-0.544","0.514","-0.505","-0.115","-0.804","-0.646","-0.139","-0.456","0.013","0.225","0.136","-0.072","-0.431","-0.659","-0.872","-0.506","0.027","0.311","-0.387","-0.362","-0.339","-0.088","-0.107","-0.01","-0.228","-0.256","-0.499","0.93","-0.986","-0.678","-0.466","-0.865","-0.89","-0.199","-0.326","-0.5","0.165","-0.699","-0.866","-0.572","-0.35","-0.31","-0.585","-0.679","-0.192","-0.299","-0.803","-0.851","-0.89","-0.745","-0.313","-0.855","-0.702","-0.625","-0.237","-1.013","-0.622","-0.745","-0.466","-1.036","-0.84","-0.939","-0.343","-0.805","-0.98","-0.252","-0.395","-0.628","-0.892","-0.63","-0.573","-0.658","-0.985","-0.796","-0.319","-0.577","-1.04","-1.01","-0.742","-0.964","-0.958","-0.951","-0.331","-0.798","-0.839","-0.493","-1.074","-0.736","-0.909","-1.029","-0.96","-1.121","-1.177","-0.988","-0.797","-1.414","-0.996","-0.855","-1.101","-1.576","-1.818","-1.683","-1.115","-0.926","-0.771","-0.905","-0.613","-0.614","-1.137","-1.23","-1.057","-0.998","-1.485","-1.249","-0.915","-0.797","-0.914","-1.026","-1.452","-1.36","-1.084","-1.884"],"x":[1.363,0.288,1.954,1.961,2.511,1.654,2.483,2.61,2.556,2.19,0.016,2.129,2.734,1.429,1.876,2.002,2.25,1.539,1.778,4.029,2.967,2.793,1.966,1.158,1.672,2.354,1.3,-0.235,-0.22,0.594,0.743,1.143,0.479,0.724,0.849,1.091,-0.209,-0.035,0.001,0.978,-0.092,0.605,1.318,0.805,0.353,0.386,0.538,0.143,0.189,0.129,1.706,0.362,0.817,0.824,0.695,-0.353,1.564,1.277,0.463,0.947,1.272,1.101,0.938,-0.586,-0.252,1.427,0.054,0.933,1.399,0.166,0.062,0.215,-0.179,2.235,-0.802,-0.73,0.9,-0.263,0.762,0.582,1.161,0.451,0.638,0.23,-0.383,1.346,0.016,0.344,0.362,0.506,-0.44,0.708,-0.358,-0.636,-0.573,1.067,0.658,-0.296,0.74,-0.364,0.631,-0.367,-0.435,-0.078,0.247,0.559,0.328,-0.024,-0.731,-0.324,-0.898,-0.545,0.905,0.351,-0.686,-0.38,1.136,1.429,0.01,0.835,0.583,-0.348,0.575,0.438,0.266,0.607,1.317,0.376,-0.079,-0.408,-0.452,0.518,0.192,-0.114,-0.123,1.638,0.491,-0.317,0.146,-0.618,0.339,-0.211,-0.705,0.094,1.337,-0.336,-0.423,-0.583,-1.235,-0.823,-0.605,-0.74,-0.301,0.639,-0.774,-0.132,-0.107,-0.744,-0.91,-0.869,-0.849,-1.365,0.009,0.611,-0.426,-0.523,-0.544,0.514,-0.505,-0.115,-0.804,-0.646,-0.139,-0.456,0.013,0.225,0.136,-0.072,-0.431,-0.659,-0.872,-0.506,0.027,0.311,-0.387,-0.362,-0.339,-0.088,-0.107,-0.01,-0.228,-0.256,-0.499,0.93,-0.986,-0.678,-0.466,-0.865,-0.89,-0.199,-0.326,-0.5,0.165,-0.699,-0.866,-0.572,-0.35,-0.31,-0.585,-0.679,-0.192,-0.299,-0.803,-0.851,-0.89,-0.745,-0.313,-0.855,-0.702,-0.625,-0.237,-1.013,-0.622,-0.745,-0.466,-1.036,-0.84,-0.939,-0.343,-0.805,-0.98,-0.252,-0.395,-0.628,-0.892,-0.63,-0.573,-0.658,-0.985,-0.796,-0.319,-0.577,-1.04,-1.01,-0.742,-0.964,-0.958,-0.951,-0.331,-0.798,-0.839,-0.493,-1.074,-0.736,-0.909,-1.029,-0.96,-1.121,-1.177,-0.988,-0.797,-1.414,-0.996,-0.855,-1.101,-1.576,-1.818,-1.683,-1.115,-0.926,-0.771,-0.905,-0.613,-0.614,-1.137,-1.23,-1.057,-0.998,-1.485,-1.249,-0.915,-0.797,-0.914,-1.026,-1.452,-1.36,-1.084,-1.884],"dim":[32,9],"rows":["Chiapas","Oaxaca","Guerrero","Puebla","Michoacán de Ocampo","Hidalgo","Veracruz de Ignacio de la Llave","Tabasco","Yucatán","Campeche","Zacatecas","Guanajuato","Tlaxcala","San Luis Potosí","Nayarit","Durango","Chihuahua","Baja California Sur","Querétaro","Sinaloa","Morelos","Quintana Roo","México","Sonora","Tamaulipas","Colima","Jalisco","Aguascalientes","Coahuila de Zaragoza","Distrito Federal","Baja California","Nuevo León"],"cols":["OVSEE","OVSDE","OVSAE","OVPT","VHAC","PL_5000","SPRIM","ANALF","PO2SM"]},"title":"Interactive Heatmap","image":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAJCAYAAABT2S4KAAACjUlEQVQ4jV2RT0iTYRzHP2+b+ydosFnN5T+mC2FCwZIGgqDR8GDiLobURfBmXbwEhWQg7CJ1CDLIgdSh0wyEahCtg7AoQdCBuBTddJrpS4X6bnOut8PL+zT9nX7P8/ye77+fpBQWVMtsmJh7BICVH/sEms8TXdrh+8ZvAJpqzjJ4+ISYe4T33zZ4fFMivn3xxDxAb+ckTb3N1HrsdF2twe/c5GfOQ3RphztX/lAWHgPAEPAjVdWRNbmR/q4/VaWqOgCyJjdl4TEMHicAUms7x6/fYAj4ybk6sB6tou6mELW2Ltq0L0StPIGOpe6mKEbjZPqnOGdJYsl8EqQA1qNVDu8/w/CwufJR3teDMf6WsgsV5H09GNPzGmomhSofMFlxj+rBPozzCUw9NyhOf8DgbwOTRM4bxGj4RWV2DtbWKca+aBgLMc74WqjMzmHcX0MZn8F0vRVp6jnHr6YpfPxKeWhIS6AYjWO8fUu4LUbj5BN7mL0OLY2GeuFWiSxi9jrYiixj99gpDw2h7qZQxmcwex0UBh4AYJkNI7W2iyQMAf//1Brqybk6tFQKL/rUfGIPANtwt+Yiua0F0D9FrTyhAXicKJFFbMPdQqAt2EKubYCy8Bg6xsK7TVyNVuweO4BmIuAXAgHyiT3kpKytORW4rGZWslx72QUN9SjjM2KvtuFu8VF3bPY6BLlexeS2ECAnZeweu3jXzZSWweMU99LB3U61PDREOjgqVOvqqoOXhGJbsAUlsigISt3oTgG2IsuCSJ/TxetzpeczAOngqCDWgU7XRuizANWJtiLLJ4hLgUuNlPb6jJyUkZOytgKAzEoWV6OV0z3AbFQRfVvAJoToaegEpzGAEzin72ejCv8ACDVJLvvmovMAAAAASUVORK5CYII=","rowcolors":null,"colcolors":null,"theme":null,"options":{"hm_width":null,"hm_height":null,"xaxis_height":80,"yaxis_width":120,"xaxis_font_size":8.4,"yaxis_font_size":8.4,"xaxis_angle":60,"xaxis_location":"bottom","yaxis_location":"right","xaxis_title":"Variables","yaxis_title":"Entidades","xaxis_title_font_size":14,"yaxis_title_font_size":14,"bins":16,"manual_breaks":false,"symbreaks":false,"print_values":false,"show_legend":false,"legend_scaler":1,"legend_title":null,"legend_location":"fl","legend_colors":["#A50026","#C62327","#E14730","#F46D43","#FB9957","#FEBF70","#FEE090","#FFF5AF","#F6FBD2","#E0F3F8","#BDE2EE","#99CAE1","#74ADD1","#5687BE","#4060AA","#313695"],"legend_bins":16,"legend_breaks":[-1.88381690323716,-1.51426738904876,-1.14471787486036,-0.775168360671968,-0.405618846483572,-0.0360693322951759,0.33348018189322,0.703029696081616,1.07257921027001,1.44212872445841,1.8116782386468,2.1812277528352,2.55077726702359,2.92032678121199,3.28987629540039,3.65942580958878,4.02897532377718],"legend_type":"histogram","legend_fill":null,"brush_color":"#0000FF","na_color":"#777777","show_grid":true,"cellnote_row":"Entidades","cellnote_col":"Variables","cellnote_val":"Value","cellnote_fontsize":12,"cellnote_color":"#222222","anim_duration":500,"rsc_labs":null,"csc_labs":null,"rsc_cols":null,"csc_cols":null,"rsc_colnames":null,"csc_colnames":null},"params":{"x":[[-0.839343506371886,-0.798142621435554,-0.742394630310595,-1.01025689329865,-0.964386842989508,-0.950594821537825,-0.958267167975614,-0.330747636070241,-0.492889217178727],[-0.998040327617225,-1.05728627869583,-0.905463541355447,-0.771339077563882,-0.612834998107723,-1.13748269518993,-0.614340168712673,-1.23013577751833,-1.48507401433198],[-0.848672103876815,-0.868673087054238,-0.773654347721689,0.639345432822225,-0.13182319223976,-0.743856467566134,-0.106758675112027,-0.910191408110129,-1.36460819184113],[0.362001649072883,0.343622677230098,0.637552490464225,0.450819164473451,0.229978751165838,1.34631168980118,-0.382741532614152,0.0161073979178134,0.506274300944716],[-0.987605834348605,-1.17746016813351,-0.735525038896024,-1.07442507465425,-0.909062027290246,-0.959665788624155,-1.02931511990367,-1.12088154423939,-0.796640580787023],[-0.395279689591002,-0.252460196629128,-0.840118467318343,-1.03555203511664,-0.939117261043138,-0.80519133216181,-0.342653113833818,-0.979636566173648,-0.628064543424904],[2.60969944745397,2.48270711152155,0.288092555645754,1.36329258106434,1.95415243637521,2.51136518981708,1.96130419907979,1.65423734164389,2.5563517336077],[-0.739789666658815,-0.605324477007086,-0.335735894824075,1.33674422581465,-0.423123798534655,-1.23498487695647,-0.582822475899492,-0.823303008608915,-0.301037283637631],[-1.11453883238947,-1.68318107170298,-0.995727914587869,-1.41395507982863,-0.855035557963492,-1.57569747951653,-1.10067357197191,-1.81798621330394,-0.926076013113061],[-0.705372202011355,-0.210909052760717,0.490763685580313,1.63780772381595,-0.317119669990084,-0.617746185720891,0.145590027676991,0.338679242605596,0.0936343514211435],[0.327981040375971,0.558786401880061,0.630722890116599,-0.364167168597075,-0.366674333823171,-0.0781730318305335,-0.435019879795046,0.246569783230863,-0.0236321740860845],[2.35365605441851,1.67228623288149,4.02897532377718,1.77797752177303,2.96676206746676,1.96587434776239,2.79301151088903,1.15785321351938,1.3004391599546],[0.816646634361749,0.362411553739039,0.537806402769192,0.386433872402028,0.143289630822219,0.128513649416518,0.189392889025076,1.70630651142716,0.824441989041701],[-0.576590959758475,-0.318950672192483,-0.630480376560573,-0.891997680752533,-0.572787149263242,-0.984845730922053,-0.65798185722899,-0.796077766580616,-1.04011117343025],[-0.571522087396443,-0.865833294791382,-0.198568000271958,-0.88999294490966,-0.325556041388838,0.165153164539788,-0.499650804801126,-0.698609376841733,-0.350016236842709],[0.805223207292816,1.31787124446579,-0.0350100738320783,-0.209428327897794,0.00140753008044437,-0.0924929750115464,0.977771726724572,0.60522911120767,0.352922718497315],[-0.0875145811936752,-0.339268193864643,-0.50600702719633,-0.87176600209404,0.0265700924083218,-0.386577660289213,0.311450659123252,-0.361619514052567,-0.106913661635241],[-0.114090513931762,0.192463140436013,0.375582771654833,1.31686274556662,-0.0789937358863937,-0.452244840035499,-0.408083356987532,0.518159519788148,-0.123089322844947],[-1.0836502909304,-1.36044388082048,-0.915266382436295,-1.24857440815675,-0.797333627869939,-1.02627710427377,-0.913862230984929,-1.45189700171667,-1.88381690323716],[2.24995276123025,2.00221886942044,0.0159240073958943,2.18983425409428,2.1294702170278,1.429151847223,2.73413364508026,1.87596357701822,1.53913954224346],[0.84869369752623,0.723519417642131,-0.220459577541313,-0.234547320371322,0.593750522876336,1.14330956892998,0.742659379794075,0.478851040721112,1.09070385129539],[-0.114946072233867,-0.505112202786117,0.610961000548666,0.00875296031354163,-0.426268726396128,-0.544173578542594,-0.522844122474508,0.513890943002566,-0.803551453212144],[-0.465507005117936,-0.677752080024853,-0.22819953852618,-0.00983375693463134,-0.255818382821676,0.930347685724325,-0.499032135507624,-0.986437026712452,-0.864547187412784],[0.265516225092026,0.437682991778207,0.0101242244402904,1.42869763185302,0.834939438408702,-0.347796728861955,0.583154211833123,0.575183258884433,0.606612420300622],[-0.431010299253556,-0.0720039910702777,-0.138697038413931,-0.646486648296779,-0.4562617447023,0.225134320383337,0.0125102561335298,0.136193285578891,-0.658795030317854],[-0.890390362700882,-0.850582667836019,-0.584906844529939,-0.309656723383654,-0.678870968393519,-0.29886347976268,-0.192198885599889,-0.802750216013314,-0.744587646016218],[0.0624042517833146,0.165725696197755,-0.252179711245397,-0.585905671998099,1.42689213322266,0.932955980967276,0.0541804738058839,1.39873759484647,0.214772542388751],[-0.744906550607908,-0.621796540534313,-0.854583188298579,-0.313396910852111,-0.702428682127663,-0.236535687120466,-0.625442704671404,-1.01337483419794,-0.466244215235843],[-0.379699144541559,-0.685966824619149,-0.323771506938498,-0.731091625604892,-0.897807002448732,0.905090051457067,-0.544543755836799,0.351263554220888,1.13588241669573],[1.10067020494763,1.2720289844111,-0.352759976311662,0.695170307751882,1.56388885231932,0.46344855771952,1.2774769056333,0.946604695254852,0.938156326626128],[0.582014036684756,0.762167184882049,2.235373257652,-0.179131687076279,-0.802023313995281,0.899679028334741,-0.730107358206836,-0.263243835080413,1.16085100389268],[-0.295989179708456,0.657655795473034,0.707630467071833,-0.440233384357351,-0.357774614898121,-0.573134618152142,-0.636296966680844,1.06706165435235,0.739512491675744]],"Rowv":true,"Colv":true,"distfun":["function (x, method = \"euclidean\", diag = FALSE, upper = FALSE, ","    p = 2) ","{","    if (!is.na(pmatch(method, \"euclidian\"))) ","        method <- \"euclidean\"","    METHODS <- c(\"euclidean\", \"maximum\", \"manhattan\", \"canberra\", ","        \"binary\", \"minkowski\")","    method <- pmatch(method, METHODS)","    if (is.na(method)) ","        stop(\"invalid distance method\")","    if (method == -1) ","        stop(\"ambiguous distance method\")","    x <- as.matrix(x)","    N <- nrow(x)","    attrs <- if (method == 6L) ","        list(Size = N, Labels = dimnames(x)[[1L]], Diag = diag, ","            Upper = upper, method = METHODS[method], p = p, call = match.call(), ","            class = \"dist\")","    else list(Size = N, Labels = dimnames(x)[[1L]], Diag = diag, ","        Upper = upper, method = METHODS[method], call = match.call(), ","        class = \"dist\")","    .Call(C_Cdist, x, method, attrs, p)","}"],"hclustfun":["function (d, method = \"complete\", members = NULL) ","{","    METHODS <- c(\"ward.D\", \"single\", \"complete\", \"average\", \"mcquitty\", ","        \"median\", \"centroid\", \"ward.D2\")","    if (method == \"ward\") {","        message(\"The \\\"ward\\\" method has been renamed to \\\"ward.D\\\"; note new \\\"ward.D2\\\"\")","        method <- \"ward.D\"","    }","    i.meth <- pmatch(method, METHODS)","    if (is.na(i.meth)) ","        stop(\"invalid clustering method\", paste(\"\", method))","    if (i.meth == -1) ","        stop(\"ambiguous clustering method\", paste(\"\", method))","    n <- as.integer(attr(d, \"Size\"))","    if (is.null(n)) ","        stop(\"invalid dissimilarities\")","    if (is.na(n) || n > 65536L) ","        stop(\"size cannot be NA nor exceed 65536\")","    if (n < 2) ","        stop(\"must have n >= 2 objects to cluster\")","    len <- as.integer(n * (n - 1)/2)","    if (length(d) != len) ","        (if (length(d) < len) ","            stop","        else warning)(\"dissimilarities of improper length\")","    if (is.null(members)) ","        members <- rep(1, n)","    else if (length(members) != n) ","        stop(\"invalid length of members\")","    storage.mode(d) <- \"double\"","    hcl <- .Fortran(C_hclust, n = n, len = len, method = as.integer(i.meth), ","        ia = integer(n), ib = integer(n), crit = double(n), members = as.double(members), ","        nn = integer(n), disnn = double(n), diss = d)","    hcass <- .Fortran(C_hcass2, n = n, ia = hcl$ia, ib = hcl$ib, ","        order = integer(n), iia = integer(n), iib = integer(n))","    structure(list(merge = cbind(hcass$iia[1L:(n - 1)], hcass$iib[1L:(n - ","        1)]), height = hcl$crit[1L:(n - 1)], order = hcass$order, ","        labels = attr(d, \"Labels\"), method = METHODS[i.meth], ","        call = match.call(), dist.method = attr(d, \"method\")), ","        class = \"hclust\")","}"],"dendrogram":"both","reorderfun":["function (d, w) ","reorder(d, w)"],"k_row":5,"k_col":2,"symm":false,"revC":null,"scale":"none","scale.by.range":false,"na.rm":true,"na.value":null,"digits":3,"cellnote":null,"cellnote_scale":false,"labRow":["Aguascalientes","Baja California","Baja California Sur","Campeche","Coahuila de Zaragoza","Colima","Chiapas","Chihuahua","Distrito Federal","Durango","Guanajuato","Guerrero","Hidalgo","Jalisco","México","Michoacán de Ocampo","Morelos","Nayarit","Nuevo León","Oaxaca","Puebla","Querétaro","Quintana Roo","San Luis Potosí","Sinaloa","Sonora","Tabasco","Tamaulipas","Tlaxcala","Veracruz de Ignacio de la Llave","Yucatán","Zacatecas"],"labCol":["ANALF","SPRIM","OVSDE","OVSEE","OVSAE","VHAC","OVPT","PL_5000","PO2SM"],"col":"RdYlBu","symbreaks":false,"na.color":"#777777","rng":null,"breaks":null,"RowSideColors":null,"ColSideColors":null,"RowColorsPalette":["blue","orange","black"],"ColColorsPalette":["cyan","maroon","grey"]}},"evals":[],"jsHooks":[]}</script>
<p>Como tercer opción, se encuentra el dendograma interactivo, el cual es ampliamente usado en documentos HTML como estas notas (Bookdown), Rmarkdown o Shiny. Aunque logra segmentar las ramas de los clusters, no muestra el espacio entre renglones o columnas que permite agilizar la lectura de grupos.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="clustering-jerárquico.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;jokergoo/ComplexHeatmap&quot;)</span></span>
<span id="cb108-2"><a href="clustering-jerárquico.html#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="clustering-jerárquico.html#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ComplexHeatmap)</span>
<span id="cb108-4"><a href="clustering-jerárquico.html#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="clustering-jerárquico.html#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="fu">Heatmap</span>(</span>
<span id="cb108-6"><a href="clustering-jerárquico.html#cb108-6" aria-hidden="true" tabindex="-1"></a>  df,</span>
<span id="cb108-7"><a href="clustering-jerárquico.html#cb108-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">split =</span> indice_marg <span class="sc">%&gt;%</span> </span>
<span id="cb108-8"><a href="clustering-jerárquico.html#cb108-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">GM =</span> <span class="fu">case_when</span>(</span>
<span id="cb108-9"><a href="clustering-jerárquico.html#cb108-9" aria-hidden="true" tabindex="-1"></a>        GM <span class="sc">==</span> <span class="st">&quot;Muy bajo&quot;</span> <span class="sc">~</span> <span class="st">&quot;MB&quot;</span>,</span>
<span id="cb108-10"><a href="clustering-jerárquico.html#cb108-10" aria-hidden="true" tabindex="-1"></a>        GM <span class="sc">==</span> <span class="st">&quot;Bajo&quot;</span> <span class="sc">~</span> <span class="st">&quot;B&quot;</span>,</span>
<span id="cb108-11"><a href="clustering-jerárquico.html#cb108-11" aria-hidden="true" tabindex="-1"></a>        GM <span class="sc">==</span> <span class="st">&quot;Medio&quot;</span> <span class="sc">~</span> <span class="st">&quot;M&quot;</span>,</span>
<span id="cb108-12"><a href="clustering-jerárquico.html#cb108-12" aria-hidden="true" tabindex="-1"></a>        GM <span class="sc">==</span> <span class="st">&quot;Alto&quot;</span> <span class="sc">~</span> <span class="st">&quot;A&quot;</span>,</span>
<span id="cb108-13"><a href="clustering-jerárquico.html#cb108-13" aria-hidden="true" tabindex="-1"></a>        GM <span class="sc">==</span> <span class="st">&quot;Muy alto&quot;</span> <span class="sc">~</span> <span class="st">&quot;MA&quot;</span></span>
<span id="cb108-14"><a href="clustering-jerárquico.html#cb108-14" aria-hidden="true" tabindex="-1"></a>     )) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(GM),</span>
<span id="cb108-15"><a href="clustering-jerárquico.html#cb108-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Scale&quot;</span>,</span>
<span id="cb108-16"><a href="clustering-jerárquico.html#cb108-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering_distance_rows =</span> <span class="st">&quot;euclidean&quot;</span>,</span>
<span id="cb108-17"><a href="clustering-jerárquico.html#cb108-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering_method_rows =</span> <span class="st">&quot;ward.D&quot;</span>,</span>
<span id="cb108-18"><a href="clustering-jerárquico.html#cb108-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">column_title =</span> <span class="st">&quot;Variables&quot;</span>,</span>
<span id="cb108-19"><a href="clustering-jerárquico.html#cb108-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">row_title_gp =</span> <span class="fu">gpar</span>(<span class="at">fontsize =</span> <span class="dv">12</span>),</span>
<span id="cb108-20"><a href="clustering-jerárquico.html#cb108-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">column_title_gp =</span> <span class="fu">gpar</span>(<span class="at">fontsize =</span> <span class="dv">12</span>),</span>
<span id="cb108-21"><a href="clustering-jerárquico.html#cb108-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">row_names_gp =</span> <span class="fu">gpar</span>(<span class="at">fontsize =</span> <span class="dv">8</span>)</span>
<span id="cb108-22"><a href="clustering-jerárquico.html#cb108-22" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="amt22_04intro2mlns_files/figure-html/unnamed-chunk-135-1.png" width="672" /></p>
<p>El último de los dendogramas presentados permite separar los renglones o columnas de acuerdo con alguna variable auxiliar especificada, lo cual puede servir para otro tipo de análisis cruzados.</p>
<p>Será responsabilidad de cada usuario determinar cuál es el dendograma que aporta más valor al análisis o reporte que está siendo presentado.</p>
</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

$('.pipehover_incremental tr').hover(function() {
  $(this).removeClass()
  $(this).prevAll().removeClass()
  $(this).nextAll().removeClass()
  $(this).addClass('hover');
  $(this).prevAll().addClass('hover');
  $(this).closest('div').next().find('img').attr("src", $(this).attr("link"));
});


$('.pipehover_select_one_row tr').hover(function() {
  $(this).removeClass()
  $(this).prevAll().removeClass()
  $(this).nextAll().removeClass()
  $(this).addClass('hover');
  $(this).closest('div').next().find('img').attr("src", $(this).attr("link"));
});

</script>
            </section>

          </div>
        </div>
      </div>
<a href="clustering-no-jerárquico.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="evaluación-de-clusters.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["amt22_04intro2mlns.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
